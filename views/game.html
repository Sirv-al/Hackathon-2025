<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Adventure</title>
        <link rel="stylesheet" href="style.css">
</head>
<body>

    <!--
      This is now the background. Your 'map.js' script will target this div.
      All other UI elements are "on top" of this.
    -->
    <main id="game-container">
        <!-- Map container -->
        <div id="map-container">
            <!-- Three.js Map will load here -->
        </div>

        <!--
          This is a "widget container" for everything in the top right.
        -->
    <div id="top-right-widget" class="widget">

        <!-- Avatar -->
        <div id="avatar-container">
            <p>Three.js Avatar will load here.</p>


        </div>

        <!-- Avatar Response -->
        <div id="avatar-response">
            <p><strong>Game Master:</strong></p><p>Please wait...</p>
        </div>

        <!-- Map Selector -->
        <div id="map-selector-container">
            <label for="map-select">Choose a map:</label>
            <select name="maps" id="map-select">
                <option value="forest">Dark Forest</option>
                <option value="cave">Goblin Cave</option>
                <option value="town">Village Square</option>
            </select>
            <button id="map-submit-button">Load Map</button>
        </div>

        <!-- Dice -->
<div id="dice-container">
            <div id="dice-visual-container">
                <button id="roll-d20-button"> <img id="dice-gif" src="dice-roll.gif" alt="Dice Rolling"></button>
            </div>
        </div>

    </div>
    </div>
        <div id = "monster-container" class="widget">
        <h2 id="player-username">Loading...</h2>

    </div>

    <!-- Stats Panel Widget (Bottom Left) -->
    <div id="stats-panel" class="widget">
        <h2 id="player-username">Loading...</h2>
        <div>
            <strong>HP:</strong>
            <span id="player-hp">20</span> / <span id="player-max-hp">20</span>
        </div>
        <div>
            <strong>Strength:</strong>
            <span id="player-str">10</span>
        </div>
        <div>
            <strong>Dexterity:</strong>
            <span id="player-dex">10</span>
        </div>
        <div>
            <strong>Intelligence:</strong>
            <span id="player-int">10</span>
        </div>
    </div>

    <!-- Log and Input Widget (Bottom Middle) -->
    <div id="log-widget" class="widget">
        <!-- Game Log -->
        <div id="game-log">
            <p></p>
        </div>

        <!-- Player Speech -->
        <div id="speech-bubble">
            <p><strong>You:</strong> ""</p>
        </div>

        <!-- Player Input -->
        <div id="player-input-form-container">
            <form id="player-input-form">
                <input
                    type="text"
                    id="player-text-input"
                    placeholder="What do you do?"
                    autocomplete="off"
                    required>
                <button type="submit">Speak</button>
            </form>
        </div>




    <!--
      JavaScript Files
      - game.js: Your main logic.
      - avatar.js / map.js: Modules for your teammate.
    -->
    <script type="module">
        import { initAvatarScene } from './avatarScene.js';

        // Initialize the avatar scene in the container
        document.addEventListener('DOMContentLoaded', () => {
            const cleanup = initAvatarScene('avatar-container');

            // Clean up when needed (page unload)
            window.addEventListener('unload', cleanup);
        });
    </script>
    <script type="module" src="game.js"></script>

</body>
</html>